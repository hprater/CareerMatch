<!DOCTYPE HTML>
<!-- View Applications HTML page>-->
<html xmlns:th="http://www.thymeleaf.org">
  <head th:replace="~{fragments/header :: header}">
    <title>DB Final Project</title>
  </head>
  <body class="dbfp-black">
    <div th:replace="~{fragments/navigation :: navigation}">Navigation goes here!</div>
    <!-- Top of Web Page Header >-->
    <main class="container">
      <div th:if="${toast}" th:class="${toast.getCssClass()}" role="alert">
        <i class="fa fa-fw" th:classappend="${toast.getSymbol()}"></i>
        <div th:text="${toast.getMessage()}"></div>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
      <h2 style="font-family:Castellar; font-size: 40px"> View Applications </h2>
      <!-- Dropdown to select search method>-->
      <form action="/viewApplication" method="post">
        <div>
          <select onchange="this.form.submit()" name="searchMethod" id="searchMethod"
                  class="dbfp-input dbfp-padding-16">
            <option th:selected="${searchMethod==0}" value>Search By</option>
            <option th:selected="${searchMethod==1}" value="1">View All Applications</option>
            <option th:selected="${searchMethod==2}" value="2">View All Applications by Major</option>
            <option th:selected="${searchMethod==3}" value="3">View All Applications by Student ID</option>
            <option th:selected="${searchMethod==4}" value="4">View All Applications by Specific Job</option>
          </select>
        </div>
      </form>
      <br>

      <!-- View Applications Dropdown / Output Table>-->
      <form th:unless="${allApplications}" action="/viewApplication2" method="post">
        <input type="hidden" th:value="${searchMethod}" name="searchMethod"/>
        <div th:if="${majorList}">
          <select onchange="this.form.submit()" name="major" id="major" class="dbfp-input dbfp-padding-16">
            <option th:each="major : ${majorList}" th:value="${major.getMajorId()}"
                    th:text="${major.getMajorDescription()} + ' (' + ${major.getMajor()} + ')'"></option>
          </select>
        </div>
        <div th:if="${studentList}">
          <select onchange="this.form.submit()" name="studentId" id="studentId"
                  class="dbfp-input dbfp-padding-16">
            <option disabled selected value>Select Student</option>
            <option th:each="student : ${studentList}" th:value="${student.getId()}"
                    th:text="${student.getId()} + ' (' + ${student.getStudentName()} + ')'"></option>
          </select>
        </div>
        <div th:if="${jobList}">
          <select onchange="this.form.submit()" name="jobId" id="jobId" class="dbfp-input dbfp-padding-16">
            <option disabled selected value>Select Job</option>
            <option th:each="job : ${jobList}" th:value="${job.getId()}"
                    th:text="${job.getJobTitle()} + ' (' + ${job.getCompanyName()} + ')'">Choose
            </option>
          </select>
        </div>
      </form>
      <div th:if="${noList}">
        <img src="images/hog.jpg" style="width:50%" class="dbfp-mid-mypic">
      </div>
      <!-- Start of table >-->
      <table class="dbfp-content-table" th:unless="${noList}">
        <thead>
          <tr>
            <th>Student Name</th>
            <th>Company Name</th>
            <th>Salary</th>
            <th>Major</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="app : ${applicationList}">
            <td th:text="${app.getStudentName()}"></td>
            <td th:text="${app.getCompanyName()}"></td>
            <td th:text="${'$' + app.getSalary()}"></td>
            <td th:text="${app.getMajorDescription()}"></td>
          </tr>
        </tbody>
      </table>
    </main>
    <div th:replace="~{fragments/footer :: footer}">Footer goes here!</div>
  </body>
</html>