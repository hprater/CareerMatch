<!DOCTYPE HTML>
<!-- View Applications HTML page>-->
<html xmlns:th="http://www.thymeleaf.org">
  <head th:replace="~{fragments/header :: header}">
    <title>DB Final Project</title>
  </head>
  <body class="dbfp-black">
    <div th:replace="~{fragments/navigation :: navigation}">Navigation goes here!</div>
    <!-- Top of Web Page Header >-->
    <main class="container">
      <h2 style="font-family:Castellar; font-size: 40px"> View Applications </h2>
      <!-- Dropdown to select search method>-->
      <form action="/viewApplication" method="post">
        <div>
          <select onchange="this.form.submit()" name="searchMethod" id="searchMethod"
                  class="dbfp-input dbfp-padding-16">
            <option th:selected="${searchMethod==0}" value>Search By</option>
            <option th:selected="${searchMethod==1}" value="1">View All Applications</option>
            <option th:selected="${searchMethod==2}" value="2">View All Applications by Major</option>
            <option th:selected="${searchMethod==3}" value="3">View All Applications by Student ID</option>
            <option th:selected="${searchMethod==4}" value="4">View All Applications by Specific Job</option>
          </select>
        </div>
      </form>
      <br>

      <!-- View ALL Applications Output Table>-->
      <div th:if="${allApplications}">
        <div th:if="${noList}">
          <img src="images/hog.jpg" style="width:50%" class="dbfp-mid-mypic">
        </div>
        <!-- Start of table >-->
        <table class="dbfp-content-table" th:unless="${noList}">
          <thead>
            <tr>
              <th>Student Name</th>
              <th>Company Name</th>
              <th>Salary</th>
              <th>Major</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="applicationElement : ${allApplications}">
              <td th:text="${applicationElement.getStudentName()}"></td>
              <td th:text="${applicationElement.getCompanyName()}"></td>
              <td th:text="${'$' + applicationElement.getSalary()}"></td>
              <td th:text="${applicationElement.getMajorDescription()}"></td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- View Applications by Major Dropdown / Output Table>-->
      <div th:if="${majorList}">
        <form action="/viewApplication2" method="post">
          <input type="hidden" th:value="${searchMethod}" name="searchMethod" />
          <div><select onchange="this.form.submit()" name="major" id="major" class="dbfp-input dbfp-padding-16">
              <option th:each="major : ${majorList}" th:value="${major.getMajorId()}"
                      th:text="${major.getMajorDescription()} + ' (' + ${major.getMajor()} + ')'">Choose
              </option>
          </select></div>
        </form>
        <div th:if="${noList}">
          <img src="images/hog.jpg" style="width:50%" class="dbfp-mid-mypic">
        </div>
        <!-- Start of table >-->
        <table class="dbfp-content-table" th:unless="${noList}">
          <thead>
            <tr>
              <th>Student Name</th>
              <th>Company Name</th>
              <th>Salary</th>
              <th>Major</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="majorElement : ${majorResults}">
              <td th:text="${majorElement.getStudentName()}"></td>
              <td th:text="${majorElement.getCompanyName()}"></td>
              <td th:text="${'$' + majorElement.getSalary()}"></td>
              <td th:text="${majorElement.getMajorDescription()}"></td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- View Applications by Student Dropdown / Output Table>-->
      <div th:if="${studentList}">
        <form action="/viewApplication2" method="post">
          <div><select onchange="this.form.submit()" name="studentId" id="studentId"
                       class="dbfp-input dbfp-padding-16">
            <optgroup label="Students">
              <option disabled selected value>Select Student</option>
              <option th:each="student : ${studentList}" th:value="${student.getId()}"
                      th:text="${student.getId()} + ' (' + ${student.getStudentName()} + ')'">Choose
              </option>
            </optgroup>
          </select></div>
        </form>
        <div th:if="${noList}">
          <img src="images/hog.jpg" style="width:50%" class="dbfp-mid-mypic">
        </div>
        <!-- Start of table >-->
        <table class="dbfp-content-table" th:unless="${noList}">
          <thead>
            <tr>
              <th>Student Name</th>
              <th>Company Name</th>
              <th>Salary</th>
              <th>Major</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="studentElement : ${studentResults}">
              <td th:text="${studentElement.getStudentName()}"></td>
              <td th:text="${studentElement.getCompanyName()}"></td>
              <td th:text="${'$' + studentElement.getSalary()}"></td>
              <td th:text="${studentElement.getMajorDescription()}"></td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- View Applications by Jobs Dropdown / Output Table>-->
      <div th:if="${jobList}">
        <form action="/viewApplication2" method="post">
          <div><select onchange="this.form.submit()" name="jobId" id="jobId" class="dbfp-input dbfp-padding-16">
            <optgroup label="Jobs">
              <option disabled selected value>Select Job</option>
              <option th:each="job : ${jobList}" th:value="${job.getId()}"
                      th:text="${job.getJobTitle()} + ' (' + ${job.getCompanyName()} + ')'">Choose
              </option>
            </optgroup>
          </select></div>
        </form>
        <div th:if="${noList}">
          <img src="images/hog.jpg" style="width:50%" class="dbfp-mid-mypic">
        </div>
        <!-- Start of table >-->
        <table class="dbfp-content-table" th:unless="${noList}">
          <thead>
            <tr>
              <th>Student Name</th>
              <th>Company Name</th>
              <th>Salary</th>
              <th>Major</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="jobElement : ${jobResults}">
              <td th:text="${jobElement.getStudentName()}"></td>
              <td th:text="${jobElement.getCompanyName()}"></td>
              <td th:text="${'$' + jobElement.getSalary()}"></td>
              <td th:text="${jobElement.getMajorDescription()}"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </main>
    <div th:replace="~{fragments/footer :: footer}">Footer goes here!</div>
  </body>
</html>